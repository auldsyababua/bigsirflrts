# MVP Test Design: Story 1.1 - Deploy OpenProject to Cloudflare

Date: 2025-01-09  
Designer: Quinn (Test Architect)  
Context: **MVP for 5-10 C-suite users**

## Executive Summary

This is a **pragmatic MVP test suite** designed for rapid validation with minimal overhead. We're testing what MUST work for executives, not building enterprise-grade coverage.

## Test Strategy Overview

- **Total test scenarios:** 12 (down from potential 50+)
- **Unit tests:** 2 (17%) - Only critical validation
- **Integration tests:** 6 (50%) - Core functionality
- **E2E tests:** 4 (33%) - Executive workflows
- **Priority distribution:** P0: 8, P1: 4, P2: 0 (skipped for MVP)

## Critical Path Test Scenarios

### AC: OpenProject deployed successfully via Docker on VM

#### Smoke Test Only
| ID | Level | Priority | Test | Why This Matters |
|----|-------|----------|------|------------------|
| 1.1-INT-001 | Integration | P0 | Docker deployment succeeds | If this fails, nothing works |
| 1.1-E2E-001 | E2E | P0 | Homepage loads in < 3 seconds | Executive first impression |

### AC: API authentication working with proper API keys

#### Must Work for Integration
| ID | Level | Priority | Test | Why This Matters |
|----|-------|----------|------|------------------|
| 1.1-UNIT-001 | Unit | P0 | API key format validation | Prevent typos breaking system |
| 1.1-INT-002 | Integration | P0 | Valid API key authenticates | Core integration requirement |
| 1.1-INT-003 | Integration | P0 | Invalid API key rejected gracefully | No ugly errors for executives |

### AC: Admin user account created and accessible

#### Executive Access Critical
| ID | Level | Priority | Test | Why This Matters |
|----|-------|----------|------|------------------|
| 1.1-E2E-002 | E2E | P0 | Admin can log in via UI | Executives need direct access |
| 1.1-INT-004 | Integration | P1 | Session persists for 8 hours | No mid-meeting logouts |

### AC: Basic project structure configured

#### Minimum Viable Structure
| ID | Level | Priority | Test | Why This Matters |
|----|-------|----------|------|------------------|
| 1.1-E2E-003 | E2E | P0 | Can create a task in UI | Core functionality |
| 1.1-INT-005 | Integration | P1 | Task saves to D1 database | Data persistence |

### AC: Health check endpoint responding

#### Operational Minimum
| ID | Level | Priority | Test | Why This Matters |
|----|-------|----------|------|------------------|
| 1.1-UNIT-002 | Unit | P0 | Health endpoint returns 200 | Basic monitoring |
| 1.1-INT-006 | Integration | P1 | Health check < 500ms | Performance baseline |

### AC: CORS configured for API access

#### Integration Enabler
| ID | Level | Priority | Test | Why This Matters |
|----|-------|----------|------|------------------|
| 1.1-E2E-004 | E2E | P1 | n8n can call API (cross-origin) | Enables automation |

## What We're NOT Testing (MVP Scope)

- **Security penetration testing** - Use basic Cloudflare protections
- **Load testing** - 10 users won't stress the system
- **Edge cases** - Focus on happy paths
- **Comprehensive error scenarios** - Just prevent crashes
- **Performance optimization** - Basic targets sufficient
- **Accessibility** - Not critical for internal C-suite tool
- **Mobile responsiveness** - Executives use desktops

## Qodo Integration Approach

### Phase 1: Generate Basic Tests
```bash
# Install Qodo CLI or VS Code extension
qodo generate --file wrangler.toml --type config
qodo generate --file src/api/auth.js --coverage basic
```

### Phase 2: Focus on Critical Paths
```javascript
// Example Qodo test for P0 scenarios
describe('MVP Critical Path Tests', () => {
  test('Executive can log in and create task', async () => {
    // Qodo will generate the implementation
    // Focus: Happy path only
  });
});
```

### Phase 3: Skip Advanced Features
- No mutation testing
- No property-based testing
- No visual regression testing
- No cross-browser testing (Chrome only)

## Test Execution Strategy

### Day 1: Deployment Validation (2 hours)
1. Run 1.1-INT-001 (Wrangler deploy)
2. Run 1.1-E2E-001 (Homepage loads)
3. Run 1.1-UNIT-001/002 (Basic validation)

### Day 2: Core Functionality (3 hours)
1. Run all P0 integration tests
2. Run executive workflow E2E tests
3. Document any issues for quick fixes

### Day 3: Polish & Handoff (1 hour)
1. Run P1 tests if time permits
2. Create executive demo script
3. Prepare fallback plans

## Risk Acceptance for MVP

### Accepted Risks
- **No automated regression suite** - Manual testing for 10 users is feasible
- **Limited error handling tests** - Cloudflare provides basic protection
- **No performance benchmarking** - Monitor in production
- **Security basics only** - Rely on Cloudflare's built-in protections

### Unacceptable Risks (Must Test)
- **Data loss** - Test persistence explicitly
- **Authentication bypass** - Basic auth tests required
- **Complete system failure** - Health checks mandatory
- **Executive-facing errors** - Test happy paths thoroughly

## Implementation Recommendations

### Use Existing Tools
```bash
# Wrangler built-in testing
wrangler dev --test

# Simple curl scripts for API tests
./test/api-smoke-test.sh

# Playwright for 4 E2E tests only
npx playwright test --grep "@critical"
```

### Qodo Configuration
```json
{
  "qodo": {
    "testLevel": "basic",
    "coverage": "critical-paths-only",
    "generateMocks": true,
    "skipEdgeCases": true,
    "focusOn": ["auth", "crud", "health"]
  }
}
```

## Success Criteria

✅ **MVP Test Suite is successful if:**
- Executives can log in reliably
- Basic task creation works
- No data is lost
- No embarrassing errors appear
- System stays up during demos

❌ **We don't need:**
- 100% code coverage
- Complex test scenarios
- Performance optimization
- Security hardening beyond basics

## Next Steps

1. **Implement P0 tests only** (8 tests total)
2. **Use Qodo for rapid test generation**
3. **Create simple bash scripts for smoke tests**
4. **Document manual test checklist for executive demo**

---

**Time Investment: 6 hours total** (not 6 weeks)
- 2 hours: Setup and smoke tests
- 3 hours: Core functionality tests
- 1 hour: Documentation and handoff

*This pragmatic approach acknowledges MVP reality while ensuring executive-facing reliability.*