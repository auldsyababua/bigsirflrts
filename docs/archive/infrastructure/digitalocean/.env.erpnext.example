# ERPNext Production Environment Configuration
# Deploy at: ops.10nz.tools (via Cloudflare Tunnel)
# Copy this file to .env.erpnext and fill in actual values from 1Password

# ==============================================================================
# ERPNEXT VERSION
# ==============================================================================
# Use 'latest' for most recent stable release
# Or specify version like 'v15.0.0'
ERPNEXT_VERSION=latest

# ==============================================================================
# SUPABASE PostgreSQL DATABASE (Session Mode - Port 5432)
# ==============================================================================
# Get from: https://supabase.com/dashboard/project/thnwlykidzhrsagyjncc/settings/database
# Connection pooling: Session mode for persistent ERPNext connection

SUPABASE_DB_HOST=aws-0-us-west-1.pooler.supabase.com
SUPABASE_DB_PORT=5432
SUPABASE_DB_NAME=postgres
# Format: postgres.{project_ref}
SUPABASE_DB_USER=postgres.thnwlykidzhrsagyjncc
# Get from 1Password: Supabase / BigSirFLRTS / Database Password
SUPABASE_DB_PASSWORD=

# ==============================================================================
# FRAPPE SITE CONFIGURATION
# ==============================================================================
# Site will be created with this name
# Must match DNS: ops.10nz.tools
FRAPPE_SITE_NAME=ops.10nz.tools
FRAPPE_SITE_NAME_HEADER=$host

# Administrator Credentials (Set during first setup)
# Get from 1Password after initial deployment
FRAPPE_ADMIN_PASSWORD=

# ==============================================================================
# CLOUDFLARE TUNNEL
# ==============================================================================
# Zero-trust access - No port forwarding needed
# Get from 1Password: Cloudflare / FLRTS Tunnel / Token
CLOUDFLARE_TUNNEL_TOKEN=

# ==============================================================================
# CLOUDFLARE R2 STORAGE (Optional - For file attachments)
# ==============================================================================
# S3-compatible object storage
# Get from 1Password: Cloudflare / R2 / Access Keys

R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_ENDPOINT=https://<account_id>.r2.cloudflarestorage.com
R2_BUCKET=10netzero-docs

# ==============================================================================
# REVERSE PROXY CONFIGURATION
# ==============================================================================
# Cloudflare will provide real client IP
UPSTREAM_REAL_IP_ADDRESS=127.0.0.1
UPSTREAM_REAL_IP_HEADER=X-Forwarded-For
UPSTREAM_REAL_IP_RECURSIVE=off
PROXY_READ_TIMEOUT=120
CLIENT_MAX_BODY_SIZE=50m

# ==============================================================================
# EMAIL CONFIGURATION (Optional)
# ==============================================================================
# SMTP settings for sending emails from ERPNext
# Leave empty to disable email sending

SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_USE_TLS=1
SMTP_DEFAULT_SENDER=noreply@10nz.tools

# ==============================================================================
# SECURITY
# ==============================================================================
# Allow embedding in iframes (for Telegram Mini App)
# Set to 1 to allow, 0 to deny
FRAPPE_ALLOW_EMBED=0

# ==============================================================================
# MONITORING (Optional - Uptime Kuma)
# ==============================================================================
# Set profile to 'monitoring' to enable
# Access at: http://localhost:3001
COMPOSE_PROFILES=

# ==============================================================================
# DEPLOYMENT NOTES
# ==============================================================================
# 1. Copy this file: cp .env.erpnext.example .env.erpnext
# 2. Fill in passwords from 1Password
# 3. Deploy with: docker compose -f docker-compose.erpnext.yml --env-file .env.erpnext up -d
# 4. Create site: docker exec -it flrts-erpnext-backend bench new-site ops.10nz.tools --db-name erpnext --admin-password <password>
# 5. Install ERPNext: docker exec -it flrts-erpnext-backend bench --site ops.10nz.tools install-app erpnext
# 6. Enable scheduler: docker exec -it flrts-erpnext-backend bench --site ops.10nz.tools scheduler enable
