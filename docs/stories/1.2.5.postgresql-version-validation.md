# Story 1.2.5: PostgreSQL Version Validation

## Story
**As a** system administrator  
**I want to** ensure the Supabase database meets version requirements  
**So that** OpenProject runs without compatibility issues and maintains data integrity

## Context
Architecture review discovered FLRTS Supabase project is running PostgreSQL 15.8.1, but NFR6 requires PostgreSQL 16+ for OpenProject compatibility. This blocker must be resolved before OpenProject deployment.

## Acceptance Criteria

### Required
1. **Version Assessment**
   - [ ] Execute `SELECT version()` on existing FLRTS database
   - [ ] Document current version (15.8.1) vs required (16+)
   - [ ] Identify specific OpenProject features requiring v16

2. **Decision Documentation**
   - [ ] IF upgrading existing project:
     - [ ] Contact Supabase support for upgrade path
     - [ ] Schedule 2-hour maintenance window
     - [ ] Create pre-upgrade backup
     - [ ] Test OpenProject post-upgrade
   - [ ] OR IF creating new project:
     - [ ] Provision new Supabase project with PostgreSQL 16+
     - [ ] Migrate any existing data
     - [ ] Update all connection strings
     - [ ] Deprecate old project

3. **Validation**
   - [ ] Verify final version: `SELECT version()` returns 16.0+
   - [ ] Test OpenProject container can connect
   - [ ] Confirm Session Mode works on port 5432
   - [ ] Document decision rationale in `/docs/architecture/decisions/`

### Testing
- [ ] OpenProject health check passes
- [ ] No PostgreSQL compatibility warnings in logs
- [ ] Session pooling maintains connection stability

## Technical Notes
- **Critical**: OpenProject requires features introduced in PostgreSQL 16
- **Risk**: Version mismatch could cause silent data corruption
- **Recommendation**: New project is cleaner for MVP (no legacy data)

## Dependencies
- Blocks: Story 1.3 (Supabase setup)
- Blocks: Story 1.4 (OpenProject deployment)

## Effort
- **Points**: 3
- **Risk**: High (database version is foundational)
- **Priority**: P0 - BLOCKER

## Definition of Done
- [ ] PostgreSQL version â‰¥ 16.0 confirmed
- [ ] Decision documented with justification
- [ ] All team members notified of connection string changes (if new project)
- [ ] Architecture diagram updated with correct version