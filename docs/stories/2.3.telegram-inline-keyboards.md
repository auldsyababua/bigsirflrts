# Story 3.6: Telegram Inline Keyboards

## Story

**As a** field operations user on mobile  
**I want** quick action buttons in bot responses  
**So that** I can tap instead of type during time-critical operations

## Context

Our team operates primarily on mobile during field work, incidents, and customer visits. Typing commands while walking, driving (passenger), or in meetings is inefficient. Inline keyboards provide instant actions via taps, critical for operational efficiency.

**UX Reference:** See `/docs/prd/Telegram-Bot-UX-Flows.md` for complete message templates, bot menu structure, and button layout specifications.

## Acceptance Criteria

### Required

1. **Task Creation Response Buttons**
   - [ ] After task creation, show:

     ```
     âœ… Task Created! #1234
     
     [â• Add Another] [ğŸ“‹ Add to List] [ğŸ‘ View All]
     ```

   - [ ] Each button triggers appropriate action
   - [ ] Buttons update based on context

2. **Task View Response Buttons**
   - [ ] When viewing tasks, show:

     ```
     [âœ… Mark Complete] [ğŸ”„ Update] [â¡ï¸ Reassign]
     ```

   - [ ] Quick status changes without typing

3. **Confirmation Dialog Buttons**
   - [ ] Replace text confirmations with buttons:

     ```
     Ready to create task:
     
     [âœ… Confirm] [âœï¸ Edit] [âŒ Cancel]
     ```

4. **List Selection Buttons**
   - [ ] When lists are mentioned, show:

     ```
     Which list?
     
     [Infrastructure] [Bug Fixes] 
     [Customer Support] [â• New List]
     ```

   - [ ] Dynamic based on user's lists

5. **Bot Menu (Persistent Buttons)**
   - [ ] Always visible command menu:

     ```
     ğŸ”˜ Bot Menu:
     [ğŸ“ New Task] [ğŸ“‹ New List]
     [ğŸ‘ View Tasks] [ğŸ“Š View Lists]
     ```

### Mobile Optimization

- [ ] Buttons sized for thumb taps (min 44x44 points)
- [ ] Maximum 3 buttons per row
- [ ] Critical actions on first row
- [ ] Contrasting emoji for visual scanning

### Testing

- [ ] Test on iOS Telegram app
- [ ] Test on Android Telegram app
- [ ] Test with gloves (field conditions)
- [ ] Test one-handed operation
- [ ] Verify buttons work in group chats

## Technical Notes

- Use Telegram's InlineKeyboardMarkup API
- Callback data must be â‰¤ 64 bytes
- Buttons persist until message is edited
- Support both callback and URL buttons

## UX References

- Lines 489-501 in Telegram-Bot-UX-Flows.md
- Lines 61-63 for bot menu structure

## Dependencies

- Depends on: Story 3.1 (Basic bot setup)
- Enhances: All Epic 3 stories

## Effort

- **Points**: 5
- **Risk**: Medium (Telegram API complexity)
- **Priority**: P1 - Critical for mobile operations

## Definition of Done

- [ ] All button types implemented
- [ ] Buttons responsive on mobile devices
- [ ] Callback handlers process instantly (<1s)
- [ ] Field team confirms improved efficiency
- [ ] No typing required for common operations
